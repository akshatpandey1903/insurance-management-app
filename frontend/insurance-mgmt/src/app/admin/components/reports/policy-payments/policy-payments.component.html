<app-navbar></app-navbar>
<div class="container mt-4" *ngIf="!isLoading">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4>Policy Payment Report</h4>
    <button class="btn btn-outline-primary" (click)="downloadPDF()">Download PDF</button>
  </div>

  <div class="table-responsive">
    <table class="table table-bordered table-hover">
      <thead class="table-light text-center">
        <tr>
          <th>#</th>
          <th>Policy ID</th>
          <th>Customer</th>
          <th>Phone</th>
          <th>Type</th>
          <th>Plan</th>
          <th>Start</th>
          <th>End</th>
          <th>Premium (â‚¹)</th>
          <th>Freq.</th>
          <th>Agent</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody class="text-center">
        <tr *ngFor="let p of policies; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ p.policyId }}</td>
          <td>{{ p.customerName }}</td>
          <td>{{ p.phoneNumber }}</td>
          <td>{{ p.insuranceType }}</td>
          <td>{{ p.planName }}</td>
          <td>{{ p.startDate }}</td>
          <td>{{ p.endDate }}</td>
          <td>{{ p.calculatedPremium }}</td>
          <td>{{ p.paymentFrequency }}</td>
          <td>{{ p.agentName }}</td>
          <td>{{ p.status }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <nav class="mt-3">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage === 0">
        <a class="page-link" (click)="prevPage()">Previous</a>
      </li>
      <li class="page-item" *ngFor="let i of [].constructor(totalPages); let idx = index"
          [class.active]="currentPage === idx">
        <a class="page-link" (click)="goToPage(idx)">{{ idx + 1 }}</a>
      </li>
      <li class="page-item" [class.disabled]="currentPage + 1 >= totalPages">
        <a class="page-link" (click)="nextPage()">Next</a>
      </li>
    </ul>
  </nav>
</div>
